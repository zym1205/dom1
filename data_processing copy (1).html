<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JavaScriptæ•°æ®å¤„ç† - ç®€åŒ–ç‰ˆ</title>
    <style>
        body {
            font-family: 'Microsoft YaHei', sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }
        h1 { text-align: center; color: #333; }
        h2 { color: #007acc; border-bottom: 2px solid #007acc; padding-bottom: 8px; }
        .demo {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            margin: 15px 0;
            border-left: 4px solid #007acc;
        }
        .demo h3 { color: #dc3545; margin-top: 0; }
        .data { 
            background: #f1f3f4; 
            padding: 10px; 
            border-radius: 5px; 
            font-family: monospace; 
            margin: 10px 0;
        }
        .result { 
            background: #e7f3ff; 
            padding: 10px; 
            border-radius: 5px; 
            font-family: monospace; 
            margin: 10px 0;
            transition: all 0.3s ease;
        }
        .result.hidden { 
            opacity: 0; 
            height: 0; 
            padding: 0; 
            margin: 0; 
            overflow: hidden; 
        }
        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
            transition: all 0.2s;
        }
        .btn:hover { transform: translateY(-2px); }
        .btn.active { background: linear-gradient(135deg, #28a745 0%, #20c997 100%); }
        .controls { text-align: center; margin: 15px 0; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸš€ JavaScriptæ•°æ®å¤„ç†æ¼”ç¤º</h1>
        
        <h2>ğŸ”¥ æ•°ç»„æ–¹æ³•</h2>
        
        <div class="demo">
            <h3>map() - æ•°ç»„è½¬æ¢</h3>
            <div class="data">åŸå§‹åˆ†æ•°: [85, 92, 78, 96, 88]</div>
            <div class="controls">
                <button class="btn" onclick="toggle('map-result', this, mapDemo)">è½¬æ¢ä¸ºç­‰çº§</button>
            </div>
            <div class="result hidden" id="map-result"></div>
        </div>

        <div class="demo">
            <h3>filter() - æ•°ç»„ç­›é€‰</h3>
            <div class="data">å­¦ç”Ÿ: [{name:'å¼ ä¸‰',score:85}, {name:'æå››',score:92}, {name:'ç‹äº”',score:78}]</div>
            <div class="controls">
                <button class="btn" onclick="toggle('filter-result', this, filterDemo)">ç­›é€‰ä¼˜ç§€å­¦ç”Ÿ</button>
            </div>
            <div class="result hidden" id="filter-result"></div>
        </div>

        <div class="demo">
            <h3>reduce() - æ•°ç»„å½’çº³</h3>
            <div class="data">é”€å”®é¢: [1200, 2300, 1800, 2500]</div>
            <div class="controls">
                <button class="btn" onclick="toggle('reduce-result', this, reduceDemo)">è®¡ç®—æ€»é¢</button>
            </div>
            <div class="result hidden" id="reduce-result"></div>
        </div>

        <div class="demo">
            <h3>sort() - æ•°ç»„æ’åº</h3>
            <div class="data">äº§å“: [{name:'æ‰‹æœº',price:3000}, {name:'ç”µè„‘',price:8000}]</div>
            <div class="controls">
                <button class="btn" onclick="toggle('sort-result', this, () => sortDemo('asc'))">ä»·æ ¼å‡åº</button>
                <button class="btn" onclick="toggle('sort-result', this, () => sortDemo('desc'))">ä»·æ ¼é™åº</button>
            </div>
            <div class="result hidden" id="sort-result"></div>
        </div>

        <h2>ğŸ¯ å¯¹è±¡æ–¹æ³•</h2>

        <div class="demo">
            <h3>Object.keys() / values()</h3>
            <div class="data">ç”¨æˆ·: {name:'ææ˜', age:28, city:'åŒ—äº¬'}</div>
            <div class="controls">
                <button class="btn" onclick="toggle('keys-result', this, () => keysDemo('keys'))">è·å–å±æ€§å</button>
                <button class="btn" onclick="toggle('keys-result', this, () => keysDemo('values'))">è·å–å±æ€§å€¼</button>
            </div>
            <div class="result hidden" id="keys-result"></div>
        </div>

        <div class="demo">
            <h3>Object.assign() - å¯¹è±¡åˆå¹¶</h3>
            <div class="data">é»˜è®¤: {theme:'light'} + ç”¨æˆ·: {theme:'dark', size:16}</div>
            <div class="controls">
                <button class="btn" onclick="toggle('assign-result', this, assignDemo)">åˆå¹¶å¯¹è±¡</button>
            </div>
            <div class="result hidden" id="assign-result"></div>
        </div>

        <div class="demo">
            <h3>è§£æ„èµ‹å€¼ + å±•å¼€è¿ç®—ç¬¦</h3>
            <div class="data">äº§å“: {id:1, name:'æ‰‹æœº', price:2999}</div>
            <div class="controls">
                <button class="btn" onclick="toggle('destruct-result', this, destructDemo)">è§£æ„æå–</button>
                <button class="btn" onclick="toggle('destruct-result', this, spreadDemo)">å±•å¼€å…‹éš†</button>
            </div>
            <div class="result hidden" id="destruct-result"></div>
        </div>

        <h2>ğŸ’ª ç»¼åˆç¤ºä¾‹</h2>
        
        <div class="demo">
            <h3>é”€å”®æ•°æ®åˆ†æ</h3>
            <div class="data">é”€å”®: [{product:'æ‰‹æœº',price:3000,qty:2}, {product:'ç”µè„‘',price:8000,qty:1}]</div>
            <div class="controls">
                <button class="btn" onclick="toggle('analysis-result', this, analysisDemo)">æ•°æ®åˆ†æ</button>
            </div>
            <div class="result hidden" id="analysis-result"></div>
        </div>
    </div>

    <script>
        // æµ‹è¯•æ•°æ®
        const scores = [85, 92, 78, 96, 88];
        const students = [{name:'å¼ ä¸‰',score:85}, {name:'æå››',score:92}, {name:'ç‹äº”',score:78}];
        const salesAmounts = [1200, 2300, 1800, 2500];
        const products = [{name:'æ‰‹æœº',price:3000}, {name:'ç”µè„‘',price:8000}, {name:'å¹³æ¿',price:2000}];
        const user = {name:'ææ˜', age:28, city:'åŒ—äº¬'};
        const salesData = [{product:'æ‰‹æœº',price:3000,qty:2}, {product:'ç”µè„‘',price:8000,qty:1}];

        function toggle(resultId, button, callback) {
            const result = document.getElementById(resultId);

            if (result.classList.contains("hidden")){
                result.innerHTML = callback();
                result.classList.remove("hidden");
                button.classList.add("active");
                //æ¸…æ¥šåŒç»„å…¶ä»–æŒ‰é’®çŠ¶æ€
                button.parentElement.querySelectorAll(".btn").forEach((btn)=>{
                    if (btn !== button) {
                    btn.classList.remove("active");
                    }
                });
             } else {
                result.classList.add("hidden");
                button.classList.remove("active");
             }
        }
        function mapDemo() {
            const grades = scores.map((score) => {
            return score >= 90 ? 'ä¼˜ç§€': score >= 80 ?'è‰¯å¥½': "åˆæ ¼";
            })
            return`ç­‰çº§: ${JSON.stringify(grades)}`
        }

        function filterDemo() {
            const excellent = students.filter(student => student.score >= 90);
            return`ä¼˜ç§€å­¦ç”Ÿï¼š${JSON.stringify(excellent)}`;
        }

        function reduceDemo() {
            const total = salesAmounts.reduce((sum, amount) => sum + amount, 0);
            const avg = (total/salesAmounts.length).toFixed(0);
            return`æ€»é¢:${total.toLocaleString()}ï¼Œå¹³å‡å€¼ï¼š${avg}`;
        }

        function sortDemo(order){
            const sorted = [...products].sort((a, b) => {
                return order === 'asc' ? a.price - b.price : b.price - a.price;
            });
            return `${order=='asc' ? 'å‡åº' : 'é™åº'}: ${JSON.stringify(sorted)}`
        }

        function keysDemo(type){
            if (type === 'keys') {
                return `å±æ€§å: ${JSON.stringify(Object.keys(user))}`;
            } else {
                return `å±æ€§å€¼: ${JSON.stringify(Object.values(user))}`;
            }
        }

        function assignDemo() {
            const defaults = {theme: 'light',lang: 'zh'};
            const userSettings = {theme: 'dark', size: 16};
            const merged = Object.assign({}, defaults, userSettings);
            return`åˆå¹¶ç»“æœ: ${JSON.stringify(merged)}`
        }

        function destructDemo(){
            const product = {id: 1,name:'æ‰‹æœº',price: 2999};
            const {name, price} = product;
            return`è§£æ„æå–: name=${name},price=${price}`;
        }

        function spreadDemo(){
            const original = {id: 1,name: 'æ‰‹æœº',price: 2999};
            const update = {...original,price: 8888, discount: 0.1};
            return`å±•å¼€æ›´æ–°:${JSON.stringify(update)}`;
        }

        function analysisDemo() {
            const totalRevenue = salesData.reduce((sum, item) => sum + (item.price * item.qty), 0);
            const productCount = salesData.length;
            const avgPrice = Math.round(totalRevenue / salesData.reduce((sum, item) => sum + item.qty, 0));

            return`æ€»æ”¶å…¥:${totalRevenue.toLocaleString()}<br>äº§å“æ•°:${productCount}<br>å¹³å‡ä»·æ ¼:${avgPrice}`;
        }


    </script>
</body>
</html> 